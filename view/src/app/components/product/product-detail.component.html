<div class="container mt-4" *ngIf="!loading; else loadingTpl">

  <div class="row">
    <!-- ·∫¢NH S·∫¢N PH·∫®M -->
    <div class="col-md-6">
      <div class="main-image mb-3">
        <img [src]="'http://localhost:8000/storage/' + product?.image" 
             class="img-fluid rounded shadow-sm" 
             alt="{{ product?.name }}">
      </div>

      <div class="row g-2">
        <div class="col-3" *ngFor="let img of product?.images">
          <img [src]="'http://localhost:8000/storage/' + img" 
               class="img-fluid rounded shadow-sm" 
               alt="{{ product?.name }}">
        </div>
      </div>
    </div>

    <!-- TH√îNG TIN S·∫¢N PH·∫®M -->
    <div class="col-md-6">
      <h2 class="fw-bold">{{ product?.name }}</h2>

      <div class="mb-2">
        <span class="fw-bold">Gi√°:</span>
        <span class="text-danger fw-bold">{{ product?.price | currency:'VND' }}</span>
      </div>

      <div class="mb-2" *ngIf="product?.description">
        <span class="fw-bold">M√¥ t·∫£:</span>
        <p>{{ product?.description }}</p>
      </div>

      <div class="mb-2">
        <span class="fw-bold">Danh m·ª•c:</span>
        {{ product?.category?.name || 'Kh√¥ng c√≥' }}
      </div>

      <div class="mb-3">
        <span class="fw-bold">Tr·∫°ng th√°i:</span>
        <span [class.text-success]="(product?.quantity ?? 0) > 0"
              [class.text-danger]="(product?.quantity ?? 0) <= 0">
          {{ (product?.quantity ?? 0) > 0 ? 'C√≤n h√†ng' : 'H·∫øt h√†ng' }}
        </span>
      </div>

      <!-- N√∫t th√™m gi·ªè h√†ng -->
      <div class="d-flex gap-2 mb-3">
        <button class="btn btn-danger flex-grow-1" (click)="addToCart(product?.id)">
          üõí Th√™m v√†o gi·ªè
        </button>
      </div>

      <!-- N√∫t admin: S·ª≠a/X√≥a -->
      <div class="d-flex gap-2 mb-3" *ngIf="isAdmin">
        <button class="btn btn-warning flex-grow-1" (click)="edit()">‚úèÔ∏è S·ª≠a</button>
        <button class="btn btn-danger flex-grow-1" (click)="delete()">üóëÔ∏è X√≥a</button>
      </div>

      <div class="mb-2">
        <button class="btn btn-secondary w-100" (click)="goBack()">Quay l·∫°i</button>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="text-center mt-4">
    <p>ƒêang t·∫£i s·∫£n ph·∫©m...</p>
  </div>
</ng-template>
