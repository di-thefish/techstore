<!-- HEADER -->
<app-header></app-header>

<div class="main-wrapper py-4" style="background-color: #f4f6f8; min-height: 100vh;">
  <div class="container">

    <div class="row g-3 mb-4">

      <!-- CATEGORY -->
      <div class="col-lg-3 d-none d-lg-block">
        <div class="category-box bg-white rounded shadow-sm h-100">
          <h6 class="fw-bold p-3 border-bottom m-0">
            üìÇ DANH M·ª§C S·∫¢N PH·∫®M
          </h6>
          <ul class="category-list list-unstyled m-0 p-2">
            <li (click)="filterByCategory(null)" [class.active]="selectedCategory === 0">
              üì± T·∫•t c·∫£ s·∫£n ph·∫©m
            </li>
            <li *ngFor="let c of categories"
                (click)="filterByCategory(c.id ?? 0)"
                [class.active]="selectedCategory === c.id">
              üîπ {{ c.name }}
            </li>
          </ul>
        </div>
      </div>

      <!-- SLIDER -->
      <div class="col-lg-6 col-md-12">
        <div id="promoCarousel"
             class="carousel slide shadow-sm rounded overflow-hidden mb-2"
             data-bs-ride="carousel"
             data-bs-interval="3000">

          <div class="carousel-indicators">
            <button *ngFor="let img of sliderImages; let i = index"
                    type="button"
                    data-bs-target="#promoCarousel"
                    [attr.data-bs-slide-to]="i"
                    [class.active]="i === 0">
            </button>
          </div>

          <div class="carousel-inner">
            <div *ngFor="let img of sliderImages; let i = index"
                 class="carousel-item"
                 [class.active]="i === 0">
              <img [src]="img" class="d-block w-100" />
            </div>
          </div>
        </div>

        <div class="row g-2">
          <div class="col-6" *ngFor="let subImg of subBanners">
            <img [src]="subImg" class="img-fluid rounded shadow-sm" />
          </div>
        </div>
      </div>

      <!-- PROMOTION -->
      <div class="col-lg-3 d-none d-lg-block">
        <div class="bg-white rounded shadow-sm h-100 p-3">
          <h6 class="fw-bold text-danger border-bottom pb-2">üî• ∆Øu ƒë√£i Hot</h6>
          <ul class="list-unstyled small">
            <li>‚úî Thu c≈© ƒë·ªïi m·ªõi - Tr·ª£ gi√° 1tr</li>
            <li>‚úî Gi·∫£m 50% b·∫£o h√†nh</li>
            <li>‚úî Ph·ª• ki·ªán gi·∫£m 20%</li>
          </ul>
        </div>
      </div>

    </div>

    <!-- PRODUCTS -->
    <div *ngIf="products.length > 0; else loading" class="row g-3">

      <div *ngFor="let product of products"
           class="col-xl-3 col-lg-4 col-md-6 col-6">

        <div class="card h-100 shadow-sm">

          <img [src]="getMainImage(product)"
               class="card-img-top"
               (click)="viewProduct(product.id)" />

          <div class="card-body d-flex flex-column">
            <h6 class="fw-bold" (click)="viewProduct(product.id)">
              {{ product.name }}
            </h6>

            <div class="mt-auto">
              <button class="btn btn-danger btn-sm w-100"
                      (click)="addToCart(product.id)">
                Th√™m v√†o gi·ªè
              </button>
            </div>
          </div>

        </div>
      </div>

    </div>

  </div>
</div>

<!-- LOADING -->
<ng-template #loading>
  <div class="text-center py-5">
    <div class="spinner-border text-danger"></div>
    <p class="mt-2 text-muted">ƒêang t·∫£i s·∫£n ph·∫©m...</p>
  </div>
</ng-template>
