<!-- HEADER -->
<app-header></app-header>

<div class="cart-wrapper py-4" style="background-color: #f4f6f8; min-height: 100vh;">
  <div class="container">

    <div class="d-flex align-items-center mb-3">
      <h4 class="fw-bold m-0">Gi·ªè h√†ng c·ªßa b·∫°n</h4>
      <span class="ms-2 badge bg-secondary rounded-pill">{{ cartItems.length }} s·∫£n ph·∫©m</span>
    </div>

    <div class="row" *ngIf="cartItems.length > 0">

      <div class="col-lg-8">
        <div class="cart-list bg-white rounded shadow-sm p-3">

          <div class="d-none d-md-flex row fw-bold text-muted border-bottom pb-2 mb-3">
            <div class="col-md-5">S·∫£n ph·∫©m</div>
            <div class="col-md-2 text-center">ƒê∆°n gi√°</div>
            <div class="col-md-2 text-center">S·ªë l∆∞·ª£ng</div>
            <div class="col-md-2 text-center">Th√†nh ti·ªÅn</div>
            <div class="col-md-1 text-center"><i class="fas fa-trash"></i></div>
          </div>

          <div *ngFor="let item of cartItems" class="row align-items-center border-bottom py-3 cart-item">

            <div class="col-md-5 d-flex align-items-center gap-3">
              <div class="img-box">
                <img [src]="'http://localhost:8000/storage/' + item.product.image" alt="{{ item.product.name }}"
                  class="img-fluid rounded">
              </div>
              <div class="product-info">
                <h6 class="mb-1 text-dark fw-bold product-name">{{ item.product.name }}</h6>
                <small class="text-muted">M√£: #{{ item.product.id }}</small>
              </div>
            </div>

            <div class="col-md-2 text-center text-muted fw-bold d-none d-md-block">
              {{ item.product.price | currency:'VND' }}
            </div>

            <div class="col-md-2 text-center">
              <div class="qty-control d-flex align-items-center justify-content-center">
                <input type="number" class="form-control text-center qty-input" [(ngModel)]="item.quantity" min="1"
                  readonly>
              </div>
            </div>

            <div class="col-md-2 text-center text-danger fw-bold">
              {{ (item.product.price * item.quantity) | currency:'VND' }}
            </div>

            <div class="col-md-1 text-center">
              <button class="btn btn-link text-danger delete-btn p-0" (click)="removeItem(item.product.id)">
                <span class="fs-5">üóëÔ∏è</span> </button>
            </div>

          </div>
        </div>

        <a routerLink="/products" class="text-decoration-none d-inline-block mt-3 text-danger fw-bold">
          ‚¨Ö Ti·∫øp t·ª•c mua s·∫Øm
        </a>
      </div>

      <div class="col-lg-4 mt-3 mt-lg-0">
        <div class="cart-summary bg-white rounded shadow-sm p-4">
          <h5 class="fw-bold mb-3 border-bottom pb-2">C·ªông gi·ªè h√†ng</h5>

          <div class="d-flex justify-content-between mb-2">
            <span class="text-muted">T·∫°m t√≠nh:</span>
            <span class="fw-bold">{{ total | currency:'VND' }}</span>
          </div>

          <div class="d-flex justify-content-between mb-4">
            <span class="text-muted">Gi·∫£m gi√°:</span>
            <span class="text-success">0ƒë</span>
          </div>

          <div class="d-flex justify-content-between align-items-center border-top pt-3 mb-4">
            <span class="fw-bold fs-5">T·ªïng c·ªông:</span>
            <span class="text-danger fw-bold fs-4">{{ total | currency:'VND' }}</span>
          </div>

          <button class="btn-checkout w-100" routerLink="/checkout">
            TI·∫æN H√ÄNH THANH TO√ÅN
          </button>

          <div class="text-center mt-3">
            <small class="text-muted">üîí B·∫£o m·∫≠t thanh to√°n 100%</small>
          </div>
        </div>
      </div>

    </div>

    <div *ngIf="cartItems.length === 0" class="empty-cart-container bg-white rounded shadow-sm text-center py-5">
      <img src="https://cdn-icons-png.flaticon.com/512/11329/11329060.png" width="150" alt="Empty Cart"
        class="mb-3 opacity-50">
      <h5 class="text-muted">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h5>
      <p class="text-muted mb-4">H√£y ch·ªçn th√™m s·∫£n ph·∫©m ƒë·ªÉ mua s·∫Øm nh√©</p>
      <a routerLink="/products" class="btn btn-danger rounded-pill px-4 py-2 fw-bold">
        QUAY L·∫†I MUA H√ÄNG
      </a>
    </div>

  </div>
</div>